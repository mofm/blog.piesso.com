<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Ignotum Per Ignotius">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>hardened .*(nt|log)s?</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://blog.piesso.com/">
<link rel="icon" href="images/website/favicon.ico" sizes="16x16">
<link rel="icon" href="images/website/favicon-32x32.png" sizes="32x32">
<link rel="icon" href="images/website/favicon-16x16.png" sizes="16x16">
<link rel="icon" href="images/website/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="images/website/android-chrome-512x512.png" sizes="512x512">
<link rel="icon" href="images/website/android-chrome-192x192.png" sizes="192x192">
<link rel="next" href="index-24.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/gentoo-zsh-completions-for-oh-my-zsh/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark
bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href=".">

            <span id="blog-title">hardened .*(nt|log)s?</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="#" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="pages/about-me" class="nav-link">About me</a>
                </li>
<li class="nav-item">
<a href="https://github.com/mofm" class="nav-link">Github</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/gentoo-zsh-completions-for-oh-my-zsh/" class="u-url">gentoo-zsh-completions for oh-my-zsh</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/gentoo-zsh-completions-for-oh-my-zsh/" rel="bookmark">
            <time class="published dt-published" datetime="2022-01-05T17:50:47+03:00" itemprop="datePublished" title="2022-01-05 17:50">2022-01-05 17:50</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/gentoo-zsh-completions-for-oh-my-zsh/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>gentoo-zsh-completions plugin for oh-my-zsh. forked from gentoo-zsh-completions main repository,
and modified for Oh-my-zsh.</p>
<section id="installation"><h2>Installation:</h2>
<pre class="code bash"><a id="rest_code_8d56716dda864d6ca71c9f716a4772a3-1" name="rest_code_8d56716dda864d6ca71c9f716a4772a3-1"></a>$ git clone https://github.com/mofm/gentoo-zsh-completions.git <span class="si">${</span><span class="nv">ZSH_CUSTOM</span><span class="k">:-</span><span class="p">~/.oh-my-zsh/custom</span><span class="si">}</span>/plugins/gentoo-zsh-completions
</pre>
<p>To use it, add <em>'gentoo-zsh-completions'</em> to the plugins array in your zshrc file:</p>
<pre class="literal-block">plugins=(... gentoo-zsh-completions)</pre>
</section>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/gentoo-kernel-build-script/" class="u-url">Gentoo kernel build script</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/gentoo-kernel-build-script/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-28T01:48:49+03:00" itemprop="datePublished" title="2021-12-28 01:48">2021-12-28 01:48</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/gentoo-kernel-build-script/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>Automating the kernel compile, configuration copying, systemd-boot and grub2 configuration updating, old kernel cleaning script for Gentoo Linux.</p>
<section id="usage"><h2>Usage:</h2>
<ul class="simple">
<li><p>First, clone this repository and change directory:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_da861bbe6888432cab85d83fb0b6e9c7-1" name="rest_code_da861bbe6888432cab85d83fb0b6e9c7-1"></a>git clone https://github.com/mofm/kernel-build.git
<a id="rest_code_da861bbe6888432cab85d83fb0b6e9c7-2" name="rest_code_da861bbe6888432cab85d83fb0b6e9c7-2"></a><span class="nb">cd</span> kernel-build
</pre>
<ul class="simple">
<li><p>Change script permissons:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_3c186eb92aee4db3a83dd0f04c997970-1" name="rest_code_3c186eb92aee4db3a83dd0f04c997970-1"></a>chmod +x build-kernel.sh
</pre>
<ul>
<li>
<p>If you are using systemd-boot you should first learn rootfs disk UUID or LVM partition and then add it to the script:</p>
<pre class="literal-block">UUID="dfc588c0-edd4-8543-a3fe-d7d49bd8f141"</pre>
</li>
</ul>
<p><strong>Optional:</strong> <em>You can add specific kernel parameters to ROOTFLAGS.</em></p>
<ul class="simple">
<li><p>Now you execute the script like so:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_1afee234424540c9aa0a9e1fdfc77700-1" name="rest_code_1afee234424540c9aa0a9e1fdfc77700-1"></a>./build-kernel.sh systemd-boot
</pre>
<ul class="simple">
<li><p>If you are using <strong>grub2</strong>:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_29fe183964444a57a8645b88cde625bb-1" name="rest_code_29fe183964444a57a8645b88cde625bb-1"></a>./build-kernel.sh grub2
</pre>
<aside class="admonition warning"><p class="admonition-title">Warning</p>
<p><code class="docutils literal">This script only cleans the previous kernel!</code></p>
</aside></section>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/vim-tips-channel/" class="u-url">Vim Tips: Channel</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/vim-tips-channel/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-22T18:32:45+03:00" itemprop="datePublished" title="2021-12-22 18:32">2021-12-22 18:32</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/vim-tips-channel/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>Vim supported channels for inter-process communication and job channels communicate with other processes.
Also, The vim packages contains the demo channel server(demoserver.py). You can find <strong>demoserver.py</strong> script in <em>"$VIMRUNTIME/tools/"</em>. <em>"$VIMRUNTIME"</em> path, may change according to your distro:</p>
<p>My path, "/usr/share/vim/vim82/tools/demoserver.py" on Gentoo Linux.</p>
<ul class="simple">
<li><p>First, run the demo server in a terminal.</p></li>
</ul>
<pre class="code bash"><a id="rest_code_d0e26dd484f649379f5961c2a3a8d6c8-1" name="rest_code_d0e26dd484f649379f5961c2a3a8d6c8-1"></a>$ python /usr/share/vim/vim82/tools/demoserver.py
</pre>
<ul>
<li><p>And then, run Vim in another terminal.</p></li>
<li>
<p>For detailed information, I am quoting from the script:</p>
<pre class="literal-block"># Server that will accept connections from a Vim channel.
# Run this server and then in Vim you can open the channel:
#  :let handle = ch_open('localhost:8765')
#
# Then Vim can send requests to the server:
#  :let response = ch_sendexpr(handle, 'hello!')
#
# And you can control Vim by typing a JSON message here, e.g.:
#   ["ex","echo 'hi there'"]
#
# There is no prompt, just type a line and press Enter.
# To exit cleanly type "quit&lt;Enter&gt;".
#
# See ":help channel-demo" in Vim.
#
# This requires Python 2.6 or later.</pre>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/systemd-boot-update-script/" class="u-url">systemd-boot update script</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/systemd-boot-update-script/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-19T04:23:45+03:00" itemprop="datePublished" title="2021-12-19 04:23">2021-12-19 04:23</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/systemd-boot-update-script/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>systemd-boot does not automatically regenerate entry configuration files like update-grup or grub-mkconfig. So you can use below script for Gentoo Linux.</p>
<pre class="code bash"><a id="rest_code_520901e4be27435b8302d3ea85d55088-1" name="rest_code_520901e4be27435b8302d3ea85d55088-1"></a><span class="ch">#!/bin/bash</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-2" name="rest_code_520901e4be27435b8302d3ea85d55088-2"></a><span class="c1">#</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-3" name="rest_code_520901e4be27435b8302d3ea85d55088-3"></a><span class="c1"># This is a simple kernel hook to populate the systemd-boot entries</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-4" name="rest_code_520901e4be27435b8302d3ea85d55088-4"></a><span class="c1"># whenever kernels are added or removed.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-5" name="rest_code_520901e4be27435b8302d3ea85d55088-5"></a><span class="c1">#</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-6" name="rest_code_520901e4be27435b8302d3ea85d55088-6"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-7" name="rest_code_520901e4be27435b8302d3ea85d55088-7"></a><span class="c1"># The UUID of your disk.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-8" name="rest_code_520901e4be27435b8302d3ea85d55088-8"></a><span class="c1"># Note: if using LVM, this should be the LVM partition.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-9" name="rest_code_520901e4be27435b8302d3ea85d55088-9"></a><span class="nv">UUID</span><span class="o">=</span><span class="s2">"CHANGEME"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-10" name="rest_code_520901e4be27435b8302d3ea85d55088-10"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-11" name="rest_code_520901e4be27435b8302d3ea85d55088-11"></a><span class="c1"># Intel microcode file name</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-12" name="rest_code_520901e4be27435b8302d3ea85d55088-12"></a><span class="nv">MCODE</span><span class="o">=</span><span class="s2">"CHANGEME"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-13" name="rest_code_520901e4be27435b8302d3ea85d55088-13"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-14" name="rest_code_520901e4be27435b8302d3ea85d55088-14"></a><span class="c1"># Any rootflags you wish to set. For example, mine are currently</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-15" name="rest_code_520901e4be27435b8302d3ea85d55088-15"></a><span class="c1"># "subvol=@ quiet splash intel_pstate=enable".</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-16" name="rest_code_520901e4be27435b8302d3ea85d55088-16"></a><span class="nv">ROOTFLAGS</span><span class="o">=</span><span class="s2">"CHANGEME"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-17" name="rest_code_520901e4be27435b8302d3ea85d55088-17"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-18" name="rest_code_520901e4be27435b8302d3ea85d55088-18"></a><span class="c1"># Our kernels.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-19" name="rest_code_520901e4be27435b8302d3ea85d55088-19"></a><span class="nv">KERNELS</span><span class="o">=()</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-20" name="rest_code_520901e4be27435b8302d3ea85d55088-20"></a><span class="nv">FIND</span><span class="o">=</span><span class="s2">"find /boot -maxdepth 1 -name 'vmlinuz-*' -type f -not -name '*.old' -print0 | sort -Vrz"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-21" name="rest_code_520901e4be27435b8302d3ea85d55088-21"></a><span class="k">while</span> <span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> -r -u3 -d <span class="s1">$'\0'</span> LINE<span class="p">;</span> <span class="k">do</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-22" name="rest_code_520901e4be27435b8302d3ea85d55088-22"></a>        <span class="nv">KERNEL</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">"</span><span class="si">${</span><span class="nv">LINE</span><span class="si">}</span><span class="s2">"</span><span class="k">)</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-23" name="rest_code_520901e4be27435b8302d3ea85d55088-23"></a>        <span class="nv">KERNELS</span><span class="o">+=(</span><span class="s2">"</span><span class="si">${</span><span class="nv">KERNEL</span><span class="p">:</span><span class="nv">8</span><span class="si">}</span><span class="s2">"</span><span class="o">)</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-24" name="rest_code_520901e4be27435b8302d3ea85d55088-24"></a><span class="k">done</span> <span class="m">3</span>&lt; &lt;<span class="o">(</span><span class="nb">eval</span> <span class="s2">"</span><span class="si">${</span><span class="nv">FIND</span><span class="si">}</span><span class="s2">"</span><span class="o">)</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-25" name="rest_code_520901e4be27435b8302d3ea85d55088-25"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-26" name="rest_code_520901e4be27435b8302d3ea85d55088-26"></a><span class="c1"># There has to be at least one kernel.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-27" name="rest_code_520901e4be27435b8302d3ea85d55088-27"></a><span class="k">if</span> <span class="o">[</span> <span class="si">${#</span><span class="nv">KERNELS</span><span class="p">[@]</span><span class="si">}</span> -lt <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-28" name="rest_code_520901e4be27435b8302d3ea85d55088-28"></a>        <span class="nb">echo</span> -e <span class="s2">"\e[2msystemd-boot\e[0m \e[1;31mNo kernels found.\e[0m"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-29" name="rest_code_520901e4be27435b8302d3ea85d55088-29"></a>        <span class="nb">exit</span> <span class="m">1</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-30" name="rest_code_520901e4be27435b8302d3ea85d55088-30"></a><span class="k">fi</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-31" name="rest_code_520901e4be27435b8302d3ea85d55088-31"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-32" name="rest_code_520901e4be27435b8302d3ea85d55088-32"></a><span class="c1"># Copy the latest kernel files to a consistent place so we can</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-33" name="rest_code_520901e4be27435b8302d3ea85d55088-33"></a><span class="c1"># keep using the same loader configuration.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-34" name="rest_code_520901e4be27435b8302d3ea85d55088-34"></a><span class="nv">LATEST</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">KERNELS</span><span class="p">[@]:</span><span class="nv">0</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span><span class="s2">"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-35" name="rest_code_520901e4be27435b8302d3ea85d55088-35"></a><span class="nb">echo</span> -e <span class="s2">"\e[2msystemd-boot\e[0m \e[1;32m</span><span class="si">${</span><span class="nv">LATEST</span><span class="si">}</span><span class="s2">\e[0m"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-36" name="rest_code_520901e4be27435b8302d3ea85d55088-36"></a>cat <span class="s">&lt;&lt; EOF &gt; /boot/loader/entries/gentoo.conf</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-37" name="rest_code_520901e4be27435b8302d3ea85d55088-37"></a><span class="s">title   Gentoo Linux</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-38" name="rest_code_520901e4be27435b8302d3ea85d55088-38"></a><span class="s">linux   /vmlinuz-${LATEST}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-39" name="rest_code_520901e4be27435b8302d3ea85d55088-39"></a><span class="s">initrd  /${MCODE}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-40" name="rest_code_520901e4be27435b8302d3ea85d55088-40"></a><span class="s">initrd  /initramfs-${LATEST}.img</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-41" name="rest_code_520901e4be27435b8302d3ea85d55088-41"></a><span class="s">options root=UUID=${UUID} rw ${ROOTFLAGS}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-42" name="rest_code_520901e4be27435b8302d3ea85d55088-42"></a><span class="s">EOF</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-43" name="rest_code_520901e4be27435b8302d3ea85d55088-43"></a><span class="c1">#done</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-44" name="rest_code_520901e4be27435b8302d3ea85d55088-44"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-45" name="rest_code_520901e4be27435b8302d3ea85d55088-45"></a><span class="c1"># Copy any legacy kernels over too, but maintain their version-</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-46" name="rest_code_520901e4be27435b8302d3ea85d55088-46"></a><span class="c1"># based names to avoid collisions.</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-47" name="rest_code_520901e4be27435b8302d3ea85d55088-47"></a><span class="k">if</span> <span class="o">[</span> <span class="si">${#</span><span class="nv">KERNELS</span><span class="p">[@]</span><span class="si">}</span> -gt <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-48" name="rest_code_520901e4be27435b8302d3ea85d55088-48"></a>        <span class="nv">LEGACY</span><span class="o">=(</span><span class="s2">"</span><span class="si">${</span><span class="nv">KERNELS</span><span class="p">[@]:</span><span class="nv">1</span><span class="si">}</span><span class="s2">"</span><span class="o">)</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-49" name="rest_code_520901e4be27435b8302d3ea85d55088-49"></a>        <span class="k">for</span> VERSION <span class="k">in</span> <span class="s2">"</span><span class="si">${</span><span class="nv">LEGACY</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-50" name="rest_code_520901e4be27435b8302d3ea85d55088-50"></a>            <span class="nb">echo</span> -e <span class="s2">"\e[2msystemd-boot\e[0m \e[1;32m</span><span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span><span class="s2">\e[0m"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-51" name="rest_code_520901e4be27435b8302d3ea85d55088-51"></a>            cat <span class="s">&lt;&lt; EOF &gt; /boot/loader/entries/gentoo-${VERSION}.conf</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-52" name="rest_code_520901e4be27435b8302d3ea85d55088-52"></a><span class="s">title   Gentoo Linux ${VERSION}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-53" name="rest_code_520901e4be27435b8302d3ea85d55088-53"></a><span class="s">linux   /vmlinuz-${VERSION}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-54" name="rest_code_520901e4be27435b8302d3ea85d55088-54"></a><span class="s">initrd  /${MCODE}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-55" name="rest_code_520901e4be27435b8302d3ea85d55088-55"></a><span class="s">initrd  /initramfs-${VERSION}.img</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-56" name="rest_code_520901e4be27435b8302d3ea85d55088-56"></a><span class="s">options root=UUID=${UUID} rw ${ROOTFLAGS}</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-57" name="rest_code_520901e4be27435b8302d3ea85d55088-57"></a><span class="s">EOF</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-58" name="rest_code_520901e4be27435b8302d3ea85d55088-58"></a>        <span class="k">done</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-59" name="rest_code_520901e4be27435b8302d3ea85d55088-59"></a><span class="k">fi</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-60" name="rest_code_520901e4be27435b8302d3ea85d55088-60"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-61" name="rest_code_520901e4be27435b8302d3ea85d55088-61"></a><span class="nb">printf</span> <span class="s2">"\n"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-62" name="rest_code_520901e4be27435b8302d3ea85d55088-62"></a><span class="nb">printf</span> <span class="s2">"Updating systemd-boot firmware \n"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-63" name="rest_code_520901e4be27435b8302d3ea85d55088-63"></a>bootctl update
<a id="rest_code_520901e4be27435b8302d3ea85d55088-64" name="rest_code_520901e4be27435b8302d3ea85d55088-64"></a>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-65" name="rest_code_520901e4be27435b8302d3ea85d55088-65"></a><span class="c1"># Success!</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-66" name="rest_code_520901e4be27435b8302d3ea85d55088-66"></a><span class="nb">echo</span> -e <span class="s2">"\e[2m---\e[0m"</span>
<a id="rest_code_520901e4be27435b8302d3ea85d55088-67" name="rest_code_520901e4be27435b8302d3ea85d55088-67"></a><span class="nb">exit</span> <span class="m">0</span>
</pre>
<p>This script forked from <a class="reference external" href="https://blobfolio.com/2018/replace-grub2-with-systemd-boot-on-ubuntu-18-04/">here</a>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/basic-timezone-api/" class="u-url">Basic Timezone API</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/basic-timezone-api/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-18T02:16:01+03:00" itemprop="datePublished" title="2021-12-18 02:16">2021-12-18 02:16</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/basic-timezone-api/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>timezone-api is lightweight Flask app with TimezoneFinder(L) python library and
provides a simple interface. Your request the timezone information for specific
latitude and longtitude pair.</p>
<h3>Request Parameters</h3>
<p>Parameters are separated using the ampersand(&amp;) character.</p>
<ul>
<li>
<strong>lat</strong>: latitude (eg. lat=39.6034810) <em>(Required)</em>
</li>
<li>
<strong>lng</strong>: longtitude (eg. lng=-119.6822510) <em>(Required)</em>
</li>
<li>
<strong>timestamp</strong>: timestamp (eg. timestamp=1331161200) <em>(Required)</em>
</li>
</ul>
<h4>Example Request</h4>
<p><strong>Request:</strong></p>
<p>API urls must follow this format:</p>
<p><code>https://api.example.com/timezone/api?lng=-119.6822510&amp;lat=39.6034810&amp;timestamp=1331766000</code></p>
<p><strong>Response:</strong></p>
<p><code>{"dstoffset":3600.0,"rawoffset":-28800.0,"status":200,"tzname":"America/Los_Angeles"}</code></p>
<pre class="code literal-block"><span></span><code><span class="o">-</span> <span class="nv">tzname</span>: <span class="nv">Timezone</span> <span class="nv">name</span>
<span class="o">-</span> <span class="nv">dstoffset</span>: <span class="nv">the</span> <span class="nv">offset</span> <span class="k">for</span> <span class="nv">daylight</span><span class="o">-</span><span class="nv">savings</span> <span class="nv">time</span> <span class="nv">in</span> <span class="nv">seconds</span>.
<span class="nv">This</span> <span class="nv">will</span> <span class="nv">be</span> <span class="nv">zero</span> <span class="k">if</span> <span class="nv">the</span> <span class="nv">time</span> <span class="nv">zone</span> <span class="nv">is</span> <span class="nv">not</span> <span class="nv">in</span> <span class="nv">Daylight</span> <span class="nv">Savings</span> <span class="nv">Time</span> <span class="nv">during</span> <span class="nv">the</span> <span class="nv">specified</span> <span class="nv">timestamp</span>.
<span class="o">-</span> <span class="nv">rawoffset</span>: <span class="nv">the</span> <span class="nv">offset</span> <span class="nv">from</span> <span class="nv">UTC</span> <span class="ss">(</span><span class="nv">in</span> <span class="nv">seconds</span><span class="ss">)</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">given</span> <span class="nv">location</span>.
<span class="nv">This</span> <span class="nv">does</span> <span class="nv">not</span> <span class="nv">take</span> <span class="nv">into</span> <span class="nv">effect</span> <span class="nv">daylight</span> <span class="nv">savings</span>.
<span class="o">-</span> <span class="nv">status</span>: <span class="nv">response</span> <span class="nv">code</span>
    <span class="o">-</span> <span class="mi">200</span>: <span class="nv">the</span> <span class="nv">request</span> <span class="nv">was</span> <span class="nv">successful</span>
    <span class="o">-</span> <span class="mi">400</span>: <span class="nv">missing</span> <span class="nv">parameter</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>
    <span class="o">-</span> <span class="mi">422</span>: <span class="nv">out</span> <span class="nv">of</span> <span class="nv">bounds</span> <span class="nv">error</span>
</code></pre>

<h3>API Health</h3>
<p>To check the API status or health</p>
<p><strong>Request:</strong></p>
<p><code>https://api.example.com/timezone/health/</code></p>
<p><strong>Response:</strong>
OK</p>
<h3>API Info</h3>
<p>For information about API</p>
<p><strong>Request:</strong></p>
<p><code>https://api.example.com/timezone/info/</code></p>
<p><strong>Response:</strong></p>
<p><code>{"debug":false,"running-since":1620688782.0930135,"version":"0.0.1"}</code></p>
<pre class="code literal-block"><span></span><code>- debug: APP debug status
- running-since: API start time
- version: API version
</code></pre>

<h3>Installation</h3>
<h4>I. Method: From Docker Hub</h4>
<pre class="code literal-block">$ docker run -d -p <span class="m">8080</span>:8000 --name timezone-35 mofm/timezone-api
</pre>
<ul>
<li>Test</li>
</ul>
<pre class="code literal-block">$ curl --request GET  <span class="s2">"http://127.0.0.1:8080/timezone/api/?lng=-119.6822510&amp;lat=39.6034810&amp;timestamp=1331766000"</span>
</pre>
<pre class="code literal-block"><span></span><code>{
  "dstoffset": 3600.0,
  "rawoffset": -28800.0,
  "status": 200,
  "tzname": "America/Los_Angeles"
}
</code></pre>

<h4>II. Method: Build Docker image</h4>
<ul>
<li>Clone this repostory</li>
</ul>
<pre class="code literal-block"><span></span><code>$ git clone https://github.com/mofm/timezone-api.git
</code></pre>

<ul>
<li>Build Docker image (slim image with Google Distroless)</li>
</ul>
<pre class="code literal-block"><span></span><code>docker build -t timezone-img .
</code></pre>

<ul>
<li>Running Docker image</li>
</ul>
<pre class="code literal-block"><span></span><code>$ docker run -d -p <span class="m">8080</span>:8000 --name timezone-api ti
</code></pre>

<ul>
<li>Test</li>
</ul>
<pre class="code literal-block"><span></span><code>$ curl --request GET  <span class="s2">"http://127.0.0.1:8080/timezone/api/?lng=-119.6822510&amp;lat=39.6034810&amp;timestamp=1331766000"</span>
</code></pre>

<pre class="code literal-block"><span></span><code>{
  "dstoffset": 3600.0,
  "rawoffset": -28800.0,
  "status": 200,
  "tzname": "America/Los_Angeles"
}
</code></pre>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/unbound-doh-behind-nginx/" class="u-url">Unbound DoH behind Nginx</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/unbound-doh-behind-nginx/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-18T01:53:49+03:00" itemprop="datePublished" title="2021-12-18 01:53">2021-12-18 01:53</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/unbound-doh-behind-nginx/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>Unbound DoH is waiting HTTP/2 requests. But Nginx proxy module doesn't support HTTP/2 on the upstream connections.
So you can use grpc proxy:</p>
<pre class="code bash"><a id="rest_code_3725f65e84f543308aa576bb83b55dd0-1" name="rest_code_3725f65e84f543308aa576bb83b55dd0-1"></a>location /dns-query <span class="o">{</span>
<a id="rest_code_3725f65e84f543308aa576bb83b55dd0-2" name="rest_code_3725f65e84f543308aa576bb83b55dd0-2"></a>     grpc_pass grpc://unbound-host<span class="p">;</span>
<a id="rest_code_3725f65e84f543308aa576bb83b55dd0-3" name="rest_code_3725f65e84f543308aa576bb83b55dd0-3"></a><span class="o">}</span>
</pre>
<p>and disable TLS for DNS-over-HTTP downstream service in unbound.conf:</p>
<pre class="code bash"><a id="rest_code_dfa0fae5f22347ac8b13592f98b0dd1e-1" name="rest_code_dfa0fae5f22347ac8b13592f98b0dd1e-1"></a>http-notls-downstream: yes
</pre>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/free-updated-geoip-databases/" class="u-url">Free Updated GeoIP Databases</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/free-updated-geoip-databases/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-16T02:04:00+03:00" itemprop="datePublished" title="2021-12-16 02:04">2021-12-16 02:04</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/free-updated-geoip-databases/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>I found and use an up-to-date and free GeoIP databases from <a class="reference external" href="https://mailfud.org/geoip-legacy/">https://mailfud.org/geoip-legacy/</a> . There are 5 different GeoIP databases(<em>also IPv6</em>) :</p>
<ul class="simple">
<li><p>Country</p></li>
<li><p>City</p></li>
<li><p>ASN</p></li>
<li><p>ISP</p></li>
<li><p>Organization</p></li>
</ul>
<p>Also it has update script(<strong>geoip_update.sh</strong>). Thanks mailfud.org :)</p>
<p>You can test City database from <a class="reference external" href="https://ip.piesso.com">here</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/urls-of-blacklists/" class="u-url">URLs of Blacklists</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/urls-of-blacklists/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-16T01:38:15+03:00" itemprop="datePublished" title="2021-12-16 01:38">2021-12-16 01:38</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/urls-of-blacklists/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>Free, up-to-date and large blacklist databases for those who want to set up DNS firewall:</p>
<aside class="admonition note"><p class="admonition-title">Note</p>
<p>Updated: 2022/01/11
- added OISD</p>
</aside><table>
<thead><tr>
<th class="head"><p><strong>Name</strong></p></th>
<th class="head"><p><strong>URL</strong></p></th>
</tr></thead>
<tbody>
<tr>
<td><p>Energized Protection</p></td>
<td><p><a class="reference external" href="https://block.energized.pro/">https://block.energized.pro/</a></p></td>
</tr>
<tr>
<td><p>OISD</p></td>
<td><p><a class="reference external" href="https://oisd.nl/">https://oisd.nl/</a></p></td>
</tr>
<tr>
<td><p>Abuse.ch</p></td>
<td><p><a class="reference external" href="https://threatfox.abuse.ch/">https://threatfox.abuse.ch/</a></p></td>
</tr>
<tr>
<td><p>Adaway</p></td>
<td><p><a class="reference external" href="https://adaway.org/">https://adaway.org/</a></p></td>
</tr>
<tr>
<td><p>Adguard List</p></td>
<td><p><a class="reference external" href="https://justdomains.github.io/blocklists/#the-lists">https://justdomains.github.io/blocklists/#the-lists</a></p></td>
</tr>
<tr>
<td><p>Blocklist.site</p></td>
<td><p><a class="reference external" href="https://github.com/blocklistproject/Lists">https://github.com/blocklistproject/Lists</a></p></td>
</tr>
<tr>
<td><p>EasyList</p></td>
<td><p><a class="reference external" href="https://justdomains.github.io/blocklists/#the-lists">https://justdomains.github.io/blocklists/#the-lists</a></p></td>
</tr>
<tr>
<td><p>Easyprivacy</p></td>
<td><p><a class="reference external" href="https://justdomains.github.io/blocklists/#the-lists">https://justdomains.github.io/blocklists/#the-lists</a></p></td>
</tr>
<tr>
<td><p>NoCoin List</p></td>
<td><p><a class="reference external" href="https://justdomains.github.io/blocklists/#the-lists">https://justdomains.github.io/blocklists/#the-lists</a></p></td>
</tr>
<tr>
<td><p>PornTop1M List</p></td>
<td><p><a class="reference external" href="https://github.com/chadmayfield/my-pihole-blocklists">https://github.com/chadmayfield/my-pihole-blocklists</a></p></td>
</tr>
<tr>
<td><p>Simple Ad List</p></td>
<td><p><a class="reference external" href="https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt">https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt</a></p></td>
</tr>
<tr>
<td><p>Simple Tracker List</p></td>
<td><p><a class="reference external" href="https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt">https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt</a></p></td>
</tr>
<tr>
<td><p>StevenBlack/hosts</p></td>
<td><p><a class="reference external" href="https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts">https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts</a></p></td>
</tr>
<tr>
<td><p>WindowsSpyBlocker</p></td>
<td><p><a class="reference external" href="https://github.com/crazy-max/WindowsSpyBlocker">https://github.com/crazy-max/WindowsSpyBlocker</a></p></td>
</tr>
<tr>
<td><p>YoYo List</p></td>
<td><p><a class="reference external" href="https://pgl.yoyo.org/adservers/">https://pgl.yoyo.org/adservers/</a></p></td>
</tr>
</tbody>
</table>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/block-ads-and-malware-via-bind9-rpz/" class="u-url">Block ads and malware via BIND9 RPZ</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/block-ads-and-malware-via-bind9-rpz/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-15T21:57:56+03:00" itemprop="datePublished" title="2021-12-15 21:57">2021-12-15 21:57</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/block-ads-and-malware-via-bind9-rpz/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <h3>Installation on Ubuntu 20.04 LTS</h3>
<ul>
<li>Run following command to install BIND 9 on Ubuntu 20.04</li>
</ul>
<pre class="code literal-block"><span></span><code>$ sudo apt update
$ sudo apt install bind9 bind9utils bind9-dnsutils
</code></pre>

<h3>Configurations for recursive DNS resolver with RPZ(response policy zone)</h3>
<ul>
<li>To enable recursion service, edit <strong><em>/etc/bind/named.conf.options</em></strong> :</li>
</ul>
<pre class="code literal-block"><span></span><code>    <span class="o">//</span> <span class="nv">hide</span> <span class="nv">version</span> <span class="nv">number</span> <span class="nv">from</span> <span class="nv">clients</span> <span class="k">for</span> <span class="nv">security</span> <span class="nv">reasons</span>.
    <span class="nv">version</span> <span class="s2">"</span><span class="s">not currently available</span><span class="s2">"</span><span class="c1">;</span>

    <span class="o">//</span> <span class="nv">optional</span> <span class="o">-</span> <span class="nv">BIND</span> <span class="nv">default</span> <span class="nv">behavior</span> <span class="nv">is</span> <span class="nv">recursion</span>
    <span class="nv">recursion</span> <span class="nv">yes</span><span class="c1">;</span>

    <span class="o">//</span> <span class="nv">provide</span> <span class="nv">recursion</span> <span class="nv">service</span> <span class="nv">to</span> <span class="nv">trusted</span> <span class="nv">clients</span> <span class="nv">only</span>
    <span class="nv">allow</span><span class="o">-</span><span class="nv">recursion</span> { <span class="mi">127</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">1</span><span class="c1">; 192.168.0.0/24; 10.10.10.0/24; };</span>

    <span class="o">//</span> <span class="nv">disallow</span> <span class="nv">zone</span> <span class="nv">transfer</span>
    <span class="nv">allow</span><span class="o">-</span><span class="nv">transfer</span> { <span class="nv">none</span><span class="c1">; };</span>

    <span class="o">//</span> <span class="nv">enable</span> <span class="nv">the</span> <span class="nv">query</span> <span class="nv">log</span>
    <span class="nv">querylog</span> <span class="nv">yes</span><span class="c1">;</span>

    <span class="o">//</span><span class="nv">enable</span> <span class="nv">response</span> <span class="nv">policy</span> <span class="nv">zone</span>.
    <span class="nv">response</span><span class="o">-</span><span class="nv">policy</span> {
        <span class="nv">zone</span> <span class="s2">"</span><span class="s">blocked.local</span><span class="s2">"</span><span class="c1">;</span>
    }<span class="c1">;</span>
</code></pre>

<ul>
<li>Add RPZ zone in <strong><em>/etc/bind/named.conf.local</em></strong> :</li>
</ul>
<pre class="code literal-block"><span></span><code>    zone "blocked.local" {
        type master;
        file "/etc/bind/db.blocked.local";
        allow-query { localhost; };
        allow-transfer { localhost; };
    };
</code></pre>

<ul>
<li>add following lines in <strong><em>/etc/bind/named.conf</em></strong> to use separate log file for RPZ(recommended):</li>
</ul>
<pre class="code literal-block"><span></span><code>    <span class="n">logging</span> <span class="p">{</span>
        <span class="n">channel</span> <span class="n">blockedlog</span> <span class="p">{</span>
            <span class="n">file</span> <span class="s2">"/var/log/named/blocked-zone.log"</span> <span class="n">versions</span> <span class="n">unlimited</span> <span class="n">size</span> <span class="mi">100</span><span class="n">m</span><span class="p">;</span>
            <span class="nb">print</span><span class="o">-</span><span class="n">time</span> <span class="n">yes</span><span class="p">;</span>
            <span class="nb">print</span><span class="o">-</span><span class="n">category</span> <span class="n">yes</span><span class="p">;</span>
            <span class="nb">print</span><span class="o">-</span><span class="n">severity</span> <span class="n">yes</span><span class="p">;</span>
            <span class="n">severity</span> <span class="n">info</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="n">category</span> <span class="n">rpz</span> <span class="p">{</span> <span class="n">blockedlog</span><span class="p">;</span> <span class="p">};</span>
    <span class="p">};</span>
</code></pre>

<ul>
<li>If <strong><em>/var/log/named/</em></strong> directory doesn't exist, create it and make bind as the owner:</li>
</ul>
<pre class="code literal-block"><span></span><code>$ sudo mkdir /var/log/named/
$ sudo chown bind:bind /var/log/named/ -R
</code></pre>

<h3>Creating Zone File</h3>
<ul>
<li>first, clone this repository:</li>
</ul>
<pre class="code literal-block"><span></span><code>$ git clone https://github.com/mofm/blocked-zone.git
</code></pre>

<ul>
<li>
<p>If there is domain(s) you want to block, you can add it to the blacklist file.</p>
</li>
<li>
<p>execute the blocked-zone.sh script(this script downloads StevenBlack host file and then creates RPZ zone file):</p>
</li>
</ul>
<pre class="code literal-block"><span></span><code>$ sudo bash blocked-zone.sh
</code></pre>

<h3>Check configurations and service:</h3>
<pre class="code literal-block"><span></span><code>$ sudo named-checkconf
$ sudo named-checkzone rpz /etc/bind/db.blocked.local
</code></pre>

<p>If no problem, restart and enable bind9 service;</p>
<pre class="code literal-block"><span></span><code>$ sudo systemctl restart bind9
$ sudo systemctl <span class="nb">enable</span> bind9
</code></pre>

<h3>Test:</h3>
<ul>
<li>You can run the dig command on the BIND server to see if RPZ is working:</li>
</ul>
<pre class="code literal-block"><span></span><code>$ dig A adskeeper.com @127.0.0.1
</code></pre>

<ul>
<li>You can also check '/var/log/named/blocked-zone.log' for query log:</li>
</ul>
<pre class="code literal-block"><span></span><code>$ sudo tail /var/log/named/blocked-zone.log
</code></pre>

<ul>
<li>READY, you can add this BIND9 host IP address to your host(s).</li>
</ul>
<h3>Optional</h3>
<ul>
<li>You can add cronjob for schedule update</li>
<li>You can change the URL to StevenBlack GitHub Hosts in <strong><em>blocked-zone.sh</em></strong>
</li>
<li>You can download and use auto-generated RPZ zone files from <a href="https://scripttiger.github.io/alts/">https://scripttiger.github.io/alts/</a>
</li>
<li>Also you can download and use abuse.ch RPZ zone file from <a href="https://urlhaus.abuse.ch/downloads/rpz/">https://urlhaus.abuse.ch/downloads/rpz/</a>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ingress-path-redirection-appends-port/" class="u-url">Ingress path redirection appends port</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                mofm
            </span></p>
            <p class="dateline">
            <a href="posts/ingress-path-redirection-appends-port/" rel="bookmark">
            <time class="published dt-published" datetime="2020-12-08T02:29:14+03:00" itemprop="datePublished" title="2020-12-08 02:29">2020-12-08 02:29</time></a>
            </p>
                <p class="commentline">
    
        <a href="posts/ingress-path-redirection-appends-port/#utterances-thread">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <p>Ingress bazi URL isteklerine container port'u ile redirect etmeye calistigi gibi bir sorunla karsilasabilirsiniz. Ornek olarak biraz daha acmak gerekirse;</p>
<pre class="code bash"><a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-1" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-1"></a>$ curl -I http://cafe.example.com/coffee/
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-2" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-2"></a>
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-3" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-3"></a>HTTP/1.1 <span class="m">200</span> OK
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-4" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-4"></a>Date: Mon, <span class="m">07</span> Dec <span class="m">2020</span> <span class="m">23</span>:47:21 GMT
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-5" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-5"></a>Content-Type: text/html
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-6" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-6"></a>Content-Length: <span class="m">87466</span>
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-7" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-7"></a>Connection: keep-alive
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-8" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-8"></a>Last-Modified: Mon, <span class="m">07</span> Dec <span class="m">2020</span> <span class="m">20</span>:48:36 GMT
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-9" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-9"></a>ETag: <span class="s2">"5fce9524-155aa"</span>
<a id="rest_code_4b140f0ff5e74829b8433c84e1af66ae-10" name="rest_code_4b140f0ff5e74829b8433c84e1af66ae-10"></a>Accept-Ranges: bytes
</pre>
<p>Yukarida goruldugu "<a class="reference external" href="http://cafe.example.com/coffee/">http://cafe.example.com/coffee/</a>" adresine gonderdigimiz istek saglikli sekilde "200" kodunu cevap olarak donuyor.
Birde "<a class="reference external" href="http://cafe.example.com/coffee">http://cafe.example.com/coffee</a>" seklinde istekte bulunarak test edelim:</p>
<pre class="code bash"><a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-1" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-1"></a>$ curl -I http://cafe.example.com/coffee
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-2" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-2"></a>
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-3" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-3"></a>HTTP/1.1 <span class="m">301</span> Moved Permanently
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-4" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-4"></a>Date: Sun, <span class="m">07</span> Dec <span class="m">2020</span> <span class="m">23</span>:52:48 GMT
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-5" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-5"></a>Content-Type: text/html
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-6" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-6"></a>Content-Length: <span class="m">169</span>
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-7" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-7"></a>Connection: keep-alive
<a id="rest_code_1769d3a6719f483bb4f769b9ca892c3d-8" name="rest_code_1769d3a6719f483bb4f769b9ca892c3d-8"></a>Location: http://cafe.example.com:8080/coffee
</pre>
<p>Bu ornek ise goruldugu gibi "<a class="reference external" href="http://hostname:cointainer_port/paths">http://hostname:cointainer_port/paths</a>" seklinde container portunu da ekleyerek sayfayi yanlis sekilde redirect etmeye calisiyor ve sayfa ulasilamaz oluyor.
Buradaki <strong>'8080'</strong> portu ingress'in arka tarafindaki nginx container'in yayin yapmakta olan portu.</p>
<p>Sorunun sebebine gelince, bu sorunun ingress ile hic bir alakasi yok. Hem <strong>kubernetes/ingress-nginx</strong> hem de <strong>nginxinc/nginx-ingress</strong> ingress controller'larinda nginx konfigurasyonu uzerindeki <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#port_in_redirect">port_in_redirect</a> degeri default olarak 'off' olarak.
Fakat arka tarafta calisan nginx container uzerindeki bu konfigurasyonu '<em>on</em>' yapilmissa bu durumla karsilasabilirsiniz. Bunu nginx.conf uzerinde '<em>port_in_redirect off;</em>' seklinde kapatarak yasanmasini engelleyebilirsiniz.</p>
<p>Asagidaki sekilde nginx.conf'u configmap'e ekleyerek nginx pod'un bu configmap'i kullanmasini saglayarak deployment yapabilirsiniz.</p>
<pre class="code yaml"><a id="rest_code_84a58170f48745289caafd4a6952e187-1" name="rest_code_84a58170f48745289caafd4a6952e187-1"></a><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-2" name="rest_code_84a58170f48745289caafd4a6952e187-2"></a><span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-3" name="rest_code_84a58170f48745289caafd4a6952e187-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-4" name="rest_code_84a58170f48745289caafd4a6952e187-4"></a>  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx-conf</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-5" name="rest_code_84a58170f48745289caafd4a6952e187-5"></a><span class="nt">data</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-6" name="rest_code_84a58170f48745289caafd4a6952e187-6"></a>  <span class="nt">nginx.conf</span><span class="p">:</span> <span class="p p-Indicator">|</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-7" name="rest_code_84a58170f48745289caafd4a6952e187-7"></a>    <span class="no">worker_processes  1;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-8" name="rest_code_84a58170f48745289caafd4a6952e187-8"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-9" name="rest_code_84a58170f48745289caafd4a6952e187-9"></a>    <span class="no">error_log  /var/log/nginx/error.log warn;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-10" name="rest_code_84a58170f48745289caafd4a6952e187-10"></a>    <span class="no">pid        /tmp/nginx.pid;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-11" name="rest_code_84a58170f48745289caafd4a6952e187-11"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-12" name="rest_code_84a58170f48745289caafd4a6952e187-12"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-13" name="rest_code_84a58170f48745289caafd4a6952e187-13"></a>    <span class="no">events {</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-14" name="rest_code_84a58170f48745289caafd4a6952e187-14"></a>        <span class="no">worker_connections  1024;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-15" name="rest_code_84a58170f48745289caafd4a6952e187-15"></a>    <span class="no">}</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-16" name="rest_code_84a58170f48745289caafd4a6952e187-16"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-17" name="rest_code_84a58170f48745289caafd4a6952e187-17"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-18" name="rest_code_84a58170f48745289caafd4a6952e187-18"></a>    <span class="no">http {</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-19" name="rest_code_84a58170f48745289caafd4a6952e187-19"></a>        <span class="no">proxy_temp_path /tmp/proxy_temp;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-20" name="rest_code_84a58170f48745289caafd4a6952e187-20"></a>        <span class="no">client_body_temp_path /tmp/client_temp;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-21" name="rest_code_84a58170f48745289caafd4a6952e187-21"></a>        <span class="no">fastcgi_temp_path /tmp/fastcgi_temp;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-22" name="rest_code_84a58170f48745289caafd4a6952e187-22"></a>        <span class="no">uwsgi_temp_path /tmp/uwsgi_temp;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-23" name="rest_code_84a58170f48745289caafd4a6952e187-23"></a>        <span class="no">scgi_temp_path /tmp/scgi_temp;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-24" name="rest_code_84a58170f48745289caafd4a6952e187-24"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-25" name="rest_code_84a58170f48745289caafd4a6952e187-25"></a>        <span class="no">include       /etc/nginx/mime.types;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-26" name="rest_code_84a58170f48745289caafd4a6952e187-26"></a>        <span class="no">default_type  application/octet-stream;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-27" name="rest_code_84a58170f48745289caafd4a6952e187-27"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-28" name="rest_code_84a58170f48745289caafd4a6952e187-28"></a>        <span class="no">log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-29" name="rest_code_84a58170f48745289caafd4a6952e187-29"></a>                          <span class="no">'$status $body_bytes_sent "$http_referer" '</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-30" name="rest_code_84a58170f48745289caafd4a6952e187-30"></a>                          <span class="no">'"$http_user_agent" "$http_x_forwarded_for"';</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-31" name="rest_code_84a58170f48745289caafd4a6952e187-31"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-32" name="rest_code_84a58170f48745289caafd4a6952e187-32"></a>        <span class="no">access_log  /var/log/nginx/access.log  main;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-33" name="rest_code_84a58170f48745289caafd4a6952e187-33"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-34" name="rest_code_84a58170f48745289caafd4a6952e187-34"></a>        <span class="no">sendfile        on;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-35" name="rest_code_84a58170f48745289caafd4a6952e187-35"></a>        <span class="no">#tcp_nopush     on;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-36" name="rest_code_84a58170f48745289caafd4a6952e187-36"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-37" name="rest_code_84a58170f48745289caafd4a6952e187-37"></a>        <span class="no">port_in_redirect off;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-38" name="rest_code_84a58170f48745289caafd4a6952e187-38"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-39" name="rest_code_84a58170f48745289caafd4a6952e187-39"></a>        <span class="no">keepalive_timeout  65;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-40" name="rest_code_84a58170f48745289caafd4a6952e187-40"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-41" name="rest_code_84a58170f48745289caafd4a6952e187-41"></a>        <span class="no">#gzip  on;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-42" name="rest_code_84a58170f48745289caafd4a6952e187-42"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-43" name="rest_code_84a58170f48745289caafd4a6952e187-43"></a>        <span class="no">include /etc/nginx/conf.d/*.conf;</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-44" name="rest_code_84a58170f48745289caafd4a6952e187-44"></a>    <span class="no">}</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-45" name="rest_code_84a58170f48745289caafd4a6952e187-45"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-46" name="rest_code_84a58170f48745289caafd4a6952e187-46"></a><span class="nn">---</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-47" name="rest_code_84a58170f48745289caafd4a6952e187-47"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-48" name="rest_code_84a58170f48745289caafd4a6952e187-48"></a><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-49" name="rest_code_84a58170f48745289caafd4a6952e187-49"></a><span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-50" name="rest_code_84a58170f48745289caafd4a6952e187-50"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-51" name="rest_code_84a58170f48745289caafd4a6952e187-51"></a>  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coffee</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-52" name="rest_code_84a58170f48745289caafd4a6952e187-52"></a><span class="nt">spec</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-53" name="rest_code_84a58170f48745289caafd4a6952e187-53"></a>  <span class="nt">replicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-54" name="rest_code_84a58170f48745289caafd4a6952e187-54"></a>  <span class="nt">selector</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-55" name="rest_code_84a58170f48745289caafd4a6952e187-55"></a>    <span class="nt">matchLabels</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-56" name="rest_code_84a58170f48745289caafd4a6952e187-56"></a>      <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coffee</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-57" name="rest_code_84a58170f48745289caafd4a6952e187-57"></a>  <span class="nt">template</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-58" name="rest_code_84a58170f48745289caafd4a6952e187-58"></a>    <span class="nt">metadata</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-59" name="rest_code_84a58170f48745289caafd4a6952e187-59"></a>      <span class="nt">labels</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-60" name="rest_code_84a58170f48745289caafd4a6952e187-60"></a>        <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coffee</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-61" name="rest_code_84a58170f48745289caafd4a6952e187-61"></a>    <span class="nt">spec</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-62" name="rest_code_84a58170f48745289caafd4a6952e187-62"></a>      <span class="nt">containers</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-63" name="rest_code_84a58170f48745289caafd4a6952e187-63"></a>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">www</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-64" name="rest_code_84a58170f48745289caafd4a6952e187-64"></a>        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginxinc/nginx-unprivileged</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-65" name="rest_code_84a58170f48745289caafd4a6952e187-65"></a>        <span class="nt">ports</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-66" name="rest_code_84a58170f48745289caafd4a6952e187-66"></a>        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-67" name="rest_code_84a58170f48745289caafd4a6952e187-67"></a>        <span class="nt">volumeMounts</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-68" name="rest_code_84a58170f48745289caafd4a6952e187-68"></a>        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx-conf</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-69" name="rest_code_84a58170f48745289caafd4a6952e187-69"></a>          <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/nginx/nginx.conf</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-70" name="rest_code_84a58170f48745289caafd4a6952e187-70"></a>          <span class="nt">subPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx.conf</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-71" name="rest_code_84a58170f48745289caafd4a6952e187-71"></a>          <span class="nt">readOnly</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-72" name="rest_code_84a58170f48745289caafd4a6952e187-72"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-73" name="rest_code_84a58170f48745289caafd4a6952e187-73"></a><span class="nn">---</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-74" name="rest_code_84a58170f48745289caafd4a6952e187-74"></a>
<a id="rest_code_84a58170f48745289caafd4a6952e187-75" name="rest_code_84a58170f48745289caafd4a6952e187-75"></a><span class="nn">---</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-76" name="rest_code_84a58170f48745289caafd4a6952e187-76"></a><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-77" name="rest_code_84a58170f48745289caafd4a6952e187-77"></a><span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Service</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-78" name="rest_code_84a58170f48745289caafd4a6952e187-78"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-79" name="rest_code_84a58170f48745289caafd4a6952e187-79"></a>  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coffee-svc</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-80" name="rest_code_84a58170f48745289caafd4a6952e187-80"></a><span class="nt">spec</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-81" name="rest_code_84a58170f48745289caafd4a6952e187-81"></a>  <span class="nt">ports</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-82" name="rest_code_84a58170f48745289caafd4a6952e187-82"></a>  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-83" name="rest_code_84a58170f48745289caafd4a6952e187-83"></a>    <span class="nt">targetPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-84" name="rest_code_84a58170f48745289caafd4a6952e187-84"></a>    <span class="nt">protocol</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TCP</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-85" name="rest_code_84a58170f48745289caafd4a6952e187-85"></a>    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-86" name="rest_code_84a58170f48745289caafd4a6952e187-86"></a>  <span class="nt">selector</span><span class="p">:</span>
<a id="rest_code_84a58170f48745289caafd4a6952e187-87" name="rest_code_84a58170f48745289caafd4a6952e187-87"></a>    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">coffee</span>
</pre>
    </div>
    </article>
</div>

        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-24.html" rel="next">Older posts</a></li>
        </ul>
<!--End of body content--><footer id="footer">
            Contents © 2022         <a href="mailto:emre.eryilmaz@piesso.com">mofm</a> - Powered by         <a href="https://getnikola.com" rel="nofollow" target="_blank">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="assets/js/all-nocdn.js"></script><script src="https://polyfill.io/v3/polyfill.js?features=Intl.RelativeTimeFormat.%7Elocale.en"></script><script src="assets/js/luxon.min.js"></script><!-- fancy dates --><script>
        luxon.Settings.defaultLocale = "en";
        fancydates(2, {"preset": false, "format": "yyyy-MM-dd HH:mm"});
        </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
