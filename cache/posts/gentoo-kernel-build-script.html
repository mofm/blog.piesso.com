<p>Automating the kernel compile, configuration copying, systemd-boot and grub2 configuration updating, old kernel cleaning script for Gentoo Linux.</p>
<section id="usage">
<h1>Usage:</h1>
<ul class="simple">
<li><p>First, clone this repository and change directory:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_6eaecc0cb8a34cf78b9640ec4141e73e-1" name="rest_code_6eaecc0cb8a34cf78b9640ec4141e73e-1"></a>git clone https://github.com/mofm/kernel-build.git
<a id="rest_code_6eaecc0cb8a34cf78b9640ec4141e73e-2" name="rest_code_6eaecc0cb8a34cf78b9640ec4141e73e-2"></a><span class="nb">cd</span> kernel-build
</pre><ul class="simple">
<li><p>Change script permissons:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_fc42576967d346b79fa0d307ae55a880-1" name="rest_code_fc42576967d346b79fa0d307ae55a880-1"></a>chmod +x build-kernel.sh
</pre><ul>
<li><p>If you are using systemd-boot you should first learn rootfs disk UUID or LVM partition and then add it to the script:</p>
<pre class="literal-block">UUID=&quot;dfc588c0-edd4-8543-a3fe-d7d49bd8f141&quot;</pre>
</li>
</ul>
<p><strong>Optional:</strong> <em>You can add specific kernel parameters to ROOTFLAGS.</em></p>
<ul class="simple">
<li><p>Now you execute the script like so:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_6ee8f83fdf794a9baa272057a1a13f46-1" name="rest_code_6ee8f83fdf794a9baa272057a1a13f46-1"></a>./build-kernel.sh systemd-boot
</pre><ul class="simple">
<li><p>If you are using <strong>grub2</strong>:</p></li>
</ul>
<pre class="code bash"><a id="rest_code_38d95a88162042a29de13feef84425ec-1" name="rest_code_38d95a88162042a29de13feef84425ec-1"></a>./build-kernel.sh grub2
</pre><aside class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal">This script only cleans the previous kernel!</code></p>
</aside>
</section>
