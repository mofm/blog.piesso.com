<p>Bu yazimda libvirt ile openvswitch entegrasyonu hakkinda giris seviyesinde adim atacagiz. Kurulum ve entegrasyona gecmeden
once bu iki yazilim nedir, ne degildir onlari taniyalim.</p>
<p><strong>Libvirt</strong> <a class="footnote-reference brackets" href="#id3" id="id1">1</a> , Redhat tarafindan 2005'ten bu yana gelistirilmeye devam eden sanallastirma ortamlari icin daemon, API ve
yonetim aracidir.</p>
<img alt="/images/libvirt_hypervisors.png" src="/images/libvirt_hypervisors.png" />
<p>Libvirt bilinen bir cok hypervisor'u desteklemektedir. Iste bunlardan bazilari:</p>
<ul class="simple">
<li><p>KVM</p></li>
<li><p>LXC</p></li>
<li><p>OpenVZ</p></li>
<li><p>Xen</p></li>
<li><p>User-mode Linux (UML)</p></li>
<li><p>Virtualbox</p></li>
<li><p>VMware ESX</p></li>
<li><p>VMware Workstation</p></li>
<li><p>Hyper-V</p></li>
<li><p>PowerVM</p></li>
<li><p>Parallels Workstation</p></li>
<li><p>Bhyve</p></li>
</ul>
<p><strong>OpenvSwitch</strong> <a class="footnote-reference brackets" href="#id4" id="id2">2</a> , kisaca sanal multilayer network switchtir. OpenvSwitch, bir SDN switch olarak hypervisor uzerindeki sanal makineleri
fiziksel olarak ayri bulunan network switchler ile entegre calisarak yonetebilir.</p>
<img alt="/images/Distributed_Open_vSwitch_instance.png" src="/images/Distributed_Open_vSwitch_instance.png" />
<p>Birden fazla protokolu desteklemektedir:</p>
<ul class="simple">
<li><p>NetFlow</p></li>
<li><p>sFlow</p></li>
<li><p>SPAN</p></li>
<li><p>RSPAN</p></li>
<li><p>CLI</p></li>
<li><p>LACP</p></li>
<li><p>802.1ag</p></li>
</ul>
<div class="section" id="kurulum">
<h1>Kurulum:</h1>
<p>Paket yoneticiniz ile libvirt ve openvswitch kurulumunu yapalim. Siz kendi dagitiminiza ve paket yoneticinize gore kurulumu yapabilirsiniz.
Gentoo uzerinde, libvirt icin gerekli &quot;USE FLAG&quot;lari aktif edip kurulumunu yapalim.Binary dagitimlar icin buna gerek yoktur. Siz direk paket yoneticiniz ile kurulumu yapin.</p>
<p>/etc/portage/package.use/libvirt:</p>
<pre class="literal-block">app-emulation/libvirt macvtap vepa qemu virt-network</pre>
<p>Simdi kurulumu yapabiliriz.</p>
<pre class="code bash"><a name="rest_code_233e814fd59049d6bc8709f91c52d60e-1"></a><span class="c1"># emerge -av libvirt</span>
</pre><p>OpenvSwitch kurulumunu yapalim.</p>
<pre class="code bash"><a name="rest_code_280c897323ec40489e2938c04a8e15e7-1"></a><span class="c1"># emerge -av openvswitch</span>
</pre><p>Sistem baslangici icin bu servisleri enable edelim.</p>
<pre class="code bash"><a name="rest_code_190780bdf81940b4aaaca45332b7af49-1"></a><span class="c1"># rc-update add ovsdb-server default</span>
<a name="rest_code_190780bdf81940b4aaaca45332b7af49-2"></a><span class="c1"># rc-update add ovs-vswitchd default</span>
<a name="rest_code_190780bdf81940b4aaaca45332b7af49-3"></a><span class="c1"># rc-update add libvirtd default</span>
<a name="rest_code_190780bdf81940b4aaaca45332b7af49-4"></a><span class="c1"># rc-update add libvirt-guests default</span>
</pre><div class="admonition note">
<p class="admonition-title">Note</p>
<p>openvswitch ve kvm kernel modullerinin yuklendiginden emin olunuz. Kernel uzerinde aktif etmek icin <a class="reference external" href="https://wiki.gentoo.org/wiki/QEMU_with_Open_vSwitch_network">openvswitch</a> , <a class="reference external" href="https://wiki.gentoo.org/wiki/QEMU">qemu</a>.</p>
</div>
<p>Sistem acilisinda bu modullerin yuklenmesi icin</p>
<p>/etc/conf.d/modules:</p>
<pre class="literal-block">modules_4=&quot;openvswitch kvm kvm_intel tun&quot;</pre>
<p>Servisleri baslatalim.</p>
<pre class="code bash"><a name="rest_code_c806b4546a5149f58d217bbe04934684-1"></a><span class="c1"># /etc/init.d/ovsdb-server start</span>
<a name="rest_code_c806b4546a5149f58d217bbe04934684-2"></a><span class="c1"># /etc/init.d/ovs-vswitchd start</span>
<a name="rest_code_c806b4546a5149f58d217bbe04934684-3"></a><span class="c1"># /etc/init.d/libvirtd start</span>
<a name="rest_code_c806b4546a5149f58d217bbe04934684-4"></a><span class="c1"># /etc/init.d/libvirt-guests start</span>
</pre><dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://libvirt.org/">https://libvirt.org/</a></p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="http://openvswitch.org">http://openvswitch.org</a></p>
</dd>
</dl>
</div>
