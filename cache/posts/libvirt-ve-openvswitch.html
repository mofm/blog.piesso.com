<p>Bu yazimda libvirt ile openvswitch entegrasyonu hakkinda giris seviyesinde adim atacagiz. Kurulum ve entegrasyona gecmeden
once bu iki yazilim nedir, ne degildir onlari taniyalim.</p>
<p><strong>Libvirt</strong> <a class="footnote-reference brackets" href="#footnote-1" id="footnote-reference-1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> , Redhat tarafindan 2005'ten bu yana gelistirilmeye devam eden sanallastirma ortamlari icin daemon, API ve
yonetim aracidir.</p>
<img alt="/images/libvirt_hypervisors.png" src="/images/libvirt_hypervisors.png" />
<p>Libvirt bilinen bir cok hypervisor'u desteklemektedir. Iste bunlardan bazilari:</p>
<ul class="simple">
<li><p>KVM</p></li>
<li><p>LXC</p></li>
<li><p>OpenVZ</p></li>
<li><p>Xen</p></li>
<li><p>User-mode Linux (UML)</p></li>
<li><p>Virtualbox</p></li>
<li><p>VMware ESX</p></li>
<li><p>VMware Workstation</p></li>
<li><p>Hyper-V</p></li>
<li><p>PowerVM</p></li>
<li><p>Parallels Workstation</p></li>
<li><p>Bhyve</p></li>
</ul>
<p><strong>OpenvSwitch</strong> <a class="footnote-reference brackets" href="#footnote-2" id="footnote-reference-2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> , kisaca sanal multilayer network switchtir. OpenvSwitch, bir SDN switch olarak hypervisor uzerindeki sanal makineleri
fiziksel olarak ayri bulunan network switchler ile entegre calisarak yonetebilir.</p>
<img alt="/images/Distributed_Open_vSwitch_instance.png" src="/images/Distributed_Open_vSwitch_instance.png" />
<p>Birden fazla protokolu desteklemektedir:</p>
<ul class="simple">
<li><p>NetFlow</p></li>
<li><p>sFlow</p></li>
<li><p>SPAN</p></li>
<li><p>RSPAN</p></li>
<li><p>CLI</p></li>
<li><p>LACP</p></li>
<li><p>802.1ag</p></li>
</ul>
<section id="kurulum">
<h1>Kurulum:</h1>
<p>Paket yoneticiniz ile libvirt ve openvswitch kurulumunu yapalim. Siz kendi dagitiminiza ve paket yoneticinize gore kurulumu yapabilirsiniz.
Gentoo uzerinde, libvirt icin gerekli &quot;USE FLAG&quot;lari aktif edip kurulumunu yapalim.Binary dagitimlar icin buna gerek yoktur. Siz direk paket yoneticiniz ile kurulumu yapin.</p>
<p>/etc/portage/package.use/libvirt:</p>
<pre class="literal-block">app-emulation/libvirt macvtap vepa qemu virt-network</pre>
<p>Simdi kurulumu yapabiliriz.</p>
<pre class="code bash"><a id="rest_code_2865eb07d47e4f8692e2acf2db07bd4c-1" name="rest_code_2865eb07d47e4f8692e2acf2db07bd4c-1"></a><span class="c1"># emerge -av libvirt</span>
</pre><p>OpenvSwitch kurulumunu yapalim.</p>
<pre class="code bash"><a id="rest_code_9059d30b0ca74a6f9590d28e9334cc0f-1" name="rest_code_9059d30b0ca74a6f9590d28e9334cc0f-1"></a><span class="c1"># emerge -av openvswitch</span>
</pre><p>Sistem baslangici icin bu servisleri enable edelim.</p>
<pre class="code bash"><a id="rest_code_67cad5c8011e4cf8a24fca452348ac0f-1" name="rest_code_67cad5c8011e4cf8a24fca452348ac0f-1"></a><span class="c1"># rc-update add ovsdb-server default</span>
<a id="rest_code_67cad5c8011e4cf8a24fca452348ac0f-2" name="rest_code_67cad5c8011e4cf8a24fca452348ac0f-2"></a><span class="c1"># rc-update add ovs-vswitchd default</span>
<a id="rest_code_67cad5c8011e4cf8a24fca452348ac0f-3" name="rest_code_67cad5c8011e4cf8a24fca452348ac0f-3"></a><span class="c1"># rc-update add libvirtd default</span>
<a id="rest_code_67cad5c8011e4cf8a24fca452348ac0f-4" name="rest_code_67cad5c8011e4cf8a24fca452348ac0f-4"></a><span class="c1"># rc-update add libvirt-guests default</span>
</pre><aside class="admonition note">
<p class="admonition-title">Note</p>
<p>openvswitch ve kvm kernel modullerinin yuklendiginden emin olunuz. Kernel uzerinde aktif etmek icin <a class="reference external" href="https://wiki.gentoo.org/wiki/QEMU_with_Open_vSwitch_network">openvswitch</a> , <a class="reference external" href="https://wiki.gentoo.org/wiki/QEMU">qemu</a>.</p>
</aside>
<p>Sistem acilisinda bu modullerin yuklenmesi icin</p>
<p>/etc/conf.d/modules:</p>
<pre class="literal-block">modules_4=&quot;openvswitch kvm kvm_intel tun&quot;</pre>
<p>Servisleri baslatalim.</p>
<pre class="code bash"><a id="rest_code_e29d60f0c67349729bcdce6e92e01770-1" name="rest_code_e29d60f0c67349729bcdce6e92e01770-1"></a><span class="c1"># /etc/init.d/ovsdb-server start</span>
<a id="rest_code_e29d60f0c67349729bcdce6e92e01770-2" name="rest_code_e29d60f0c67349729bcdce6e92e01770-2"></a><span class="c1"># /etc/init.d/ovs-vswitchd start</span>
<a id="rest_code_e29d60f0c67349729bcdce6e92e01770-3" name="rest_code_e29d60f0c67349729bcdce6e92e01770-3"></a><span class="c1"># /etc/init.d/libvirtd start</span>
<a id="rest_code_e29d60f0c67349729bcdce6e92e01770-4" name="rest_code_e29d60f0c67349729bcdce6e92e01770-4"></a><span class="c1"># /etc/init.d/libvirt-guests start</span>
</pre><aside class="footnote brackets" id="footnote-1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#footnote-reference-1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://libvirt.org/">https://libvirt.org/</a></p>
</aside>
<aside class="footnote brackets" id="footnote-2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#footnote-reference-2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="http://openvswitch.org">http://openvswitch.org</a></p>
</aside>
</section>
